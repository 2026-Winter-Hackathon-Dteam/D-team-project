{% extends "base.html" %}

{% load static %}

{% block title %}チーム分析結果{% endblock %}

{% block content %}

 <!-- チームリーダーのみ閲覧可能。チームリーダー以外は分析が表示されません） -->

<div class="results-container">
  <h1>チーム分析結果</h1>
  <p>所属しているチームのマネージャー向けの分析結果です</p>

  {% if is_team_leader %}
    <!-- グラフ表示 -->
    <div id="chart-container">
        <!-- HTMLとCSSでグラフを実装 -->
        {{ team_graph_data }}
    </div>
    <div>
      <!-- アドバイス表示 -->
      {{ team_advice_data }}
    </div>
    <div>>
      <!-- 散布図表示 -->
      {{ team_scatter_data }}
    </div>
  {% else %}
    <p>このページはチームリーダーのみ閲覧できます。</p>
  {% endif %}
</div>

{{ team_graph_data|json_script:"team-graph-data" }}
{{ team_advice_data|json_script:"team-advice-data" }}
{{ team_matrix_data|json_script:"team-matrix-data" }}
<!-- グラフデータをJSON形式で埋め込み -->
<script>
  const TEAM_ID = "{{ team_id }}";
  const teamAdviceData = JSON.parse(document.getElementById("team-advice-data").textContent);
  const graphData = JSON.parse(document.getElementById("team-graph-data").textContent);
  const teamMatrixData = JSON.parse(document.getElementById("team-matrix-data").textContent);
  console.log("Team graph data:", graphData);
  console.log("Team advice data:", teamAdviceData);
  console.log("Team matrix data:", teamMatrixData);
</script>

{% endblock %}

{% block extra_js %}{% endblock %}