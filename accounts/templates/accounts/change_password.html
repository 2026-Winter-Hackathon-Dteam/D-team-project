{% extends "base.html" %}
{% load static %}

{% block title %}password{% endblock %}

{% block content %}
<div class="flex justify-center items-center gap-4 h-[calc(100vh-80px)]">
  <!-- ======== 見出し ======== -->
  <div class="w-full max-w-[480px] min-h-[520px] flex flex-col items-center border border-gray-100 bg-white text-lg shadow-2xl p-10 rounded-lg">
    <h1 class="text-3xl text-teamy-navy font-extrabold">パスワード変更</h1>

    <!-- ======== フォーム ======== -->
    <form method="post" class="flex flex-col p-6 w-[90%] mx-auto">
      {% csrf_token %}

      {% if form.non_field_errors %}
        <div class="text-red-500 text-xs bg-red-50 p-2 rounded break-words
                    [&>ul]:list-none [&>ul]:m-0 [&>ul]:p-0
                    [&>ul>li]:m-0 [&>ul>li]:break-words mb-6">
          {{ form.non_field_errors }}
        </div>
      {% endif %}

      <!-- ======== ID表示＋inputs ======== -->
      <div class="flex flex-col gap-8 pt-6 text-base">

        <div class="flex">
          <span class="flex-[2] font-medium">スペースコード</span>
          <span class="flex-[1]">{{ request.user.space.code }}</span>
        </div>

        <div class="flex">
          <span class="flex-[2] font-medium">社員ID</span>
          <span class="flex-[1]">{{ request.user.employee_id }}</span>
        </div>

      {% if messages %}
        {% for message in messages %}
          <div class="flex flex-col gap-2 rounded-md bg-teamy-pinkRed/10 text-teamy-pinkRed px-4 py-2">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}

      <!-- inputs -->
      <div class="flex flex-col gap-8 flex-grow justify-center">
        <label class="flex flex-col gap-1">
          {{form.old_password.label_tag}}
          {{form.old_password}}
          {{form.old_password.errors}}   
        </label>

        <label class="flex flex-col gap-1">          
          {{form.new_password1.label_tag}}
          {{form.new_password1}}
          {{form.new_password1.errors}}  
        </label>

        <label class="flex flex-col gap-1">          
          {{form.new_password2.label_tag}}
          {{form.new_password2}}
          {{form.new_password2.errors}}  
        </label>

      </div>

      <!-- button -->
      <div class="flex flex-col items-center gap-2 mt-8">
        <button type="submit"
          class="add-account self-center inline-block bg-teamy-orange hover:bg-teamy-orangeDark
                 hover:scale-[1.03] active:scale-[0.98] transition-transform
                 text-white font-medium px-6 py-2 rounded-full shadow-md text-base">
          変更する
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}