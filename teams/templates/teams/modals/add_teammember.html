{% load static %}

<!-- ================= メンバー検索モーダル ================= -->
<div id="searchMemberModal" class="fixed hidden inset-0 z-50">

  <!-- ===== モーダル背景 ===== -->
  <div class="modal-bg absolute inset-0 flex items-center justify-center bg-black/50 p-4">

    <!-- ===== モーダル本体 ===== -->
    <div class="modal-content relative flex h-[640px] w-full max-w-[500px] flex-col items-center rounded-lg bg-white p-10 text-xl shadow-xl">
      
      <!-- 閉じるボタン -->
      <button
        type="button"
        class="modal-close absolute top-4 right-4 text-gray-400 text-4xl hover:text-gray-600">
        ×
      </button>
      
      <!-- ===== 検索入力 ===== -->
      <div class="relative mb-8 w-full px-10">

        <!-- 検索アイコン -->
        <div class="pointer-events-none absolute inset-y-0 left-14 flex items-center">
          <svg class="h-6 w-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </div>

        <!-- HTMXでユーザー検索 -->
        <input type="text" name="q" 
               class="w-full rounded-full border border-gray-400 py-3 pr-6 pl-14 text-xl" 
               placeholder="検索" 
               hx-get="{% url 'user_search' %}" 
               hx-trigger="keyup changed delay:500ms" 
               hx-target="#search-results"
               hx-vals='{"team_id": "{{ selected_team.id }}"}' /> 
                <!-- hx-get= レスポンスをどこに表示するか !!urlができたら{# #}コメントアウトを外す!! -->
                <!-- hx-trigger= 指定したURLにGETリクエスト送信  -->
                <!-- hx-target= いつ実行するか [keyup：キーボードから指が離れて / changed：入力値が前回リクエストと変わっていたら実行 / delay:500ms：入力が止まって0.5秒待つ（必須）] -->
      </div>

      <!-- ===== 一覧ヘッダー ===== -->
      <div class="mb-1 flex w-full rounded-t-sm bg-gray-100 px-6 py-2">
        <span class="text-teamy-navy w-1/3 text-center font-bold">名前</span>
        <span class="text-teamy-navy w-2/3 text-center font-bold">ユーザーID</span>
      </div>

      <!-- ===== 検索結果 ===== -->
      <div id="search-results" class="w-full flex-grow overflow-y-auto">

        {% include 'teams/modals/result_list.html' %}

      </div>
      
    </div>
  </div>
</div>
