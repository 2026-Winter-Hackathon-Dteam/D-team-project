{% load static %}

<header class="flex items-center justify-between h-24 p-8 bg-white shadow-md sticky top-0 z-[0]">
  <!-- ロゴ -->
<div class="flex-shrink-0 flex items-center">
  <a href="#" class="ml-6">  <!-- home -->
    <img src="{% static 'imgs/Teamy_logo.png' %}" alt="Teamy_logo" class="h-16 w-auto">
  </a>
</div>

{% comment %}
   {% if user.is_authenticated %}
   <!-- ログイン判定 -->
{% endcomment %}


<!-- ======== ログイン後 ======== -->
  <div class="hidden md:flex items-center gap-6">
    <nav class="flex items-center gap-12 mr-6">
      <a
        href="/analysis/"
        class="text-[#716C6C] hover:opacity-70 {% if request.path == '/analysis/' %}text-[#04D0C5]{% endif %}"
      >Analysis</a>
      <a
        href="/questions/"
        class="text-[#716C6C] hover:opacity-70 {% if request.path == '/questions/' %}text-[#04D0C5]{% endif %}"
      >Questions</a>
      <a
        href="/teams/"
        class="text-[#716C6C] hover:opacity-70 {% if request.path == '/teams/' %}text-[#04D0C5]{% endif %}"
      >Teams</a>
      <a
        href="/members/"
        class="text-[#716C6C] hover:opacity-70 {% if request.path == '//' %}text-[#04D0C5]{% endif %}"
      >Members</a>
    </nav>
    {% comment %}URLができたらhrefを{% url 'analysis:index' %}にする{% endcomment %}

    <!-- チーム名 -->
    <div class="relative group flex items-center">
      <button class="flex items-center text-[#0E1336] group-hover:opacity-70 transition-opacity font-medium focus:outline-none">
        チーム名
        <svg class="ml-1 w-4 h-4 transition-transform duration-200 group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
        </svg>
      </button>

      <div class="absolute top-full left-0 whitespace-nowrap w-max  
        bg-white border border-gray-100 shadow-lg rounded-md py-2 
        invisible opacity-0 group-hover:visible group-hover:opacity-100
        transition-all duration-200 z-[100]">
        <!-- current_teamと所属チームをここで受け取る -->
          {% comment %}{% if teams %}
            {% for team in teams %}
              <a href="#" class="block px-4 py-2 hover:text-[#04D0C5] hover:bg-gray-50 transition-colors">
                {{ team.name }}
              </a>
            {% endfor %}
          {% else %}
          <span class="block px-4 py-2 text-sm text-gray-400">所属チームがありません</span>
          {% endif %}{% endcomment %}
          <span class="block px-4 py-2 text-sm text-gray-400">所属チームがありません</span>
      </div>
    </div>
    
    <!-- ユーザー名 -->
    <div class="relative group flex items-center">
      <button class="flex items-center text-[#0E1336] group-hover:opacity-70 transition-opacity font-medium focus:outline-none">
        ユーザー名
        <svg class="ml-1 w-4 h-4 transition-transform duration-200 group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
        </svg>
      </button>

      <!-- プルダウン -->
        <div class="absolute top-full right-0 whitespace-nowrap w-max  
          bg-white border border-gray-100 shadow-lg rounded-md py-2 
          invisible opacity-0 group-hover:visible group-hover:opacity-100
          transition-all duration-200 z-[100]">
          <a href="#" class="block px-4 py-2 hover:text-[#04D0C5] hover:bg-gray-50 transition-colors">プロフィール変更</a>
          <a href="#" class="block px-4 py-2 hover:text-[#04D0C5] hover:bg-gray-50 transition-colors">パスワード変更</a>
          <a href="#" class="block px-4 py-2 hover:text-[#04D0C5] hover:bg-gray-50 transition-colors">スペース編集</a><!-- is owner判定 -->
          <a href="#" class="block px-4 py-2 hover:text-[#04D0C5] hover:bg-gray-50 transition-colors">ログアウト</a>
        </div>
    </div>
  </div>

{% comment %}
{% else %}
<!-- ======== ログイン前 ======== -->
<nav class="flex items-center gap-12 mr-6">
  <a href="#">Home</a>
  <a href="#">Login</a>
</nav>
{% endif %}
{% endcomment %}

</header>